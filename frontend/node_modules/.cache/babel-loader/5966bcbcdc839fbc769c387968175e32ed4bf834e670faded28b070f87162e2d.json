{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import{getNoteById,updateNote}from'../../services/notesService';import{getAllUsers}from'../../services/userService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MinuteNoteDetail=()=>{const{id}=useParams();const[note,setNote]=useState(null);const[users,setUsers]=useState([]);const[selectedAttendees,setSelectedAttendees]=useState([]);const navigate=useNavigate();// Fetch note and users\nuseEffect(()=>{const fetchNoteAndUsers=async()=>{try{const noteResponse=await getNoteById(id);const usersResponse=await getAllUsers();setNote(noteResponse.data);setUsers(usersResponse.data.users);if(noteResponse.data.attendees){// Ensure all IDs are strings for consistent comparison\nconst attendeeIds=noteResponse.data.attendees.map(String);setSelectedAttendees(attendeeIds);}}catch(err){console.error('Error fetching data:',err);}};fetchNoteAndUsers();},[id]);const handleSave=async()=>{try{await updateNote(id,{attendees:selectedAttendees});alert('Note updated successfully!');}catch(err){console.error('Error saving note:',err);}};const handleAttendeeChange=userId=>{const idStr=String(userId);setSelectedAttendees(prev=>prev.includes(idStr)?prev.filter(id=>id!==idStr):[...prev,idStr]);};const handleMarkAll=()=>{if(selectedAttendees.length===users.length){setSelectedAttendees([]);}else{setSelectedAttendees(users.map(user=>String(user.id)));}};const handleBack=()=>{navigate(-1);// Go back to previous page\n};if(!note||!users.length)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',fontFamily:'Segoe UI, sans-serif'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleBack,style:{backgroundColor:'#c9c9c9',padding:'6px 12px',border:'none',borderRadius:'8px',marginBottom:'20px',cursor:'pointer'},children:\"\\u2190 Back\"}),/*#__PURE__*/_jsx(\"h1\",{style:{fontStyle:'italic',fontWeight:'normal'},children:note.title}),/*#__PURE__*/_jsx(\"p\",{style:{backgroundColor:'#e0ecff',padding:'20px',borderRadius:'10px',fontStyle:'italic',minWidth:'400px',minHeight:'100px',width:'fit-content',maxWidth:'600px',marginBottom:'20px'},children:note.content}),/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:'20px'},children:\"Attendees:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleMarkAll,style:{marginBottom:'10px',padding:'6px 12px',backgroundColor:'#b4d8f7',border:'none',borderRadius:'10px',cursor:'pointer'},children:selectedAttendees.length===users.length?'Unmark All':'Mark All'}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyleType:'none',paddingLeft:'0'},children:users.map(user=>/*#__PURE__*/_jsx(\"li\",{style:{marginBottom:'10px'},children:/*#__PURE__*/_jsxs(\"label\",{style:{fontStyle:'italic'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedAttendees.includes(String(user.id)),onChange:()=>handleAttendeeChange(user.id),style:{marginRight:'10px'}}),user.firstName,\" \",user.lastName]})},user.id))}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'20px',display:'flex',gap:'10px'},children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,style:{backgroundColor:'#d9d9d9',border:'none',borderRadius:'10px',padding:'6px 12px',cursor:'pointer'},children:\"Save\"})})]});};export default MinuteNoteDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","getNoteById","updateNote","getAllUsers","jsx","_jsx","jsxs","_jsxs","MinuteNoteDetail","id","note","setNote","users","setUsers","selectedAttendees","setSelectedAttendees","navigate","fetchNoteAndUsers","noteResponse","usersResponse","data","attendees","attendeeIds","map","String","err","console","error","handleSave","alert","handleAttendeeChange","userId","idStr","prev","includes","filter","handleMarkAll","length","user","handleBack","children","style","padding","fontFamily","onClick","backgroundColor","border","borderRadius","marginBottom","cursor","fontStyle","fontWeight","title","minWidth","minHeight","width","maxWidth","content","marginTop","listStyleType","paddingLeft","type","checked","onChange","marginRight","firstName","lastName","display","gap"],"sources":["C:/Users/USER/Desktop/sys-integ/frontend/src/pages/meetings/minute_note_detail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { getNoteById, updateNote } from '../../services/notesService';\r\nimport { getAllUsers } from '../../services/userService';\r\n\r\nconst MinuteNoteDetail = () => {\r\n  const { id } = useParams();\r\n  const [note, setNote] = useState(null);\r\n  const [users, setUsers] = useState([]);\r\n  const [selectedAttendees, setSelectedAttendees] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  // Fetch note and users\r\n  useEffect(() => {\r\n    const fetchNoteAndUsers = async () => {\r\n      try {\r\n        const noteResponse = await getNoteById(id);\r\n        const usersResponse = await getAllUsers();\r\n\r\n        setNote(noteResponse.data);\r\n        setUsers(usersResponse.data.users);\r\n\r\n        if (noteResponse.data.attendees) {\r\n          // Ensure all IDs are strings for consistent comparison\r\n          const attendeeIds = noteResponse.data.attendees.map(String);\r\n          setSelectedAttendees(attendeeIds);\r\n        }\r\n      } catch (err) {\r\n        console.error('Error fetching data:', err);\r\n      }\r\n    };\r\n\r\n    fetchNoteAndUsers();\r\n  }, [id]);\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      await updateNote(id, { attendees: selectedAttendees });\r\n      alert('Note updated successfully!');\r\n    } catch (err) {\r\n      console.error('Error saving note:', err);\r\n    }\r\n  };\r\n\r\n  const handleAttendeeChange = (userId) => {\r\n    const idStr = String(userId);\r\n    setSelectedAttendees((prev) =>\r\n      prev.includes(idStr)\r\n        ? prev.filter((id) => id !== idStr)\r\n        : [...prev, idStr]\r\n    );\r\n  };\r\n\r\n  const handleMarkAll = () => {\r\n    if (selectedAttendees.length === users.length) {\r\n      setSelectedAttendees([]);\r\n    } else {\r\n      setSelectedAttendees(users.map((user) => String(user.id)));\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    navigate(-1); // Go back to previous page\r\n  };\r\n\r\n  if (!note || !users.length) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div style={{ padding: '20px', fontFamily: 'Segoe UI, sans-serif' }}>\r\n      <button\r\n        onClick={handleBack}\r\n        style={{\r\n          backgroundColor: '#c9c9c9',\r\n          padding: '6px 12px',\r\n          border: 'none',\r\n          borderRadius: '8px',\r\n          marginBottom: '20px',\r\n          cursor: 'pointer'\r\n        }}\r\n      >\r\n        ‚Üê Back\r\n      </button>\r\n\r\n      <h1 style={{ fontStyle: 'italic', fontWeight: 'normal' }}>{note.title}</h1>\r\n\r\n      <p\r\n        style={{\r\n          backgroundColor: '#e0ecff',\r\n          padding: '20px',\r\n          borderRadius: '10px',\r\n          fontStyle: 'italic',\r\n          minWidth: '400px',\r\n          minHeight: '100px',\r\n          width: 'fit-content',\r\n          maxWidth: '600px',\r\n          marginBottom: '20px'\r\n        }}\r\n      >\r\n        {note.content}\r\n      </p>\r\n\r\n      <h3 style={{ marginTop: '20px' }}>Attendees:</h3>\r\n      <button\r\n        onClick={handleMarkAll}\r\n        style={{\r\n          marginBottom: '10px',\r\n          padding: '6px 12px',\r\n          backgroundColor: '#b4d8f7',\r\n          border: 'none',\r\n          borderRadius: '10px',\r\n          cursor: 'pointer'\r\n        }}\r\n      >\r\n        {selectedAttendees.length === users.length ? 'Unmark All' : 'Mark All'}\r\n      </button>\r\n\r\n      <ul style={{ listStyleType: 'none', paddingLeft: '0' }}>\r\n        {users.map((user) => (\r\n          <li key={user.id} style={{ marginBottom: '10px' }}>\r\n            <label style={{ fontStyle: 'italic' }}>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={selectedAttendees.includes(String(user.id))}\r\n                onChange={() => handleAttendeeChange(user.id)}\r\n                style={{ marginRight: '10px' }}\r\n              />\r\n              {user.firstName} {user.lastName}\r\n            </label>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      <div style={{ marginTop: '20px', display: 'flex', gap: '10px' }}>\r\n        <button\r\n          onClick={handleSave}\r\n          style={{\r\n            backgroundColor: '#d9d9d9',\r\n            border: 'none',\r\n            borderRadius: '10px',\r\n            padding: '6px 12px',\r\n            cursor: 'pointer'\r\n          }}\r\n        >\r\n          Save\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MinuteNoteDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}