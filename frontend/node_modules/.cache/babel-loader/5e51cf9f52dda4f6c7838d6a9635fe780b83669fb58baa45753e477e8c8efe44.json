{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{getNotes,getTicketStatus}from'../../services/notesService';import background from'../../assets/background.png';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MeetingNotesList(){const[notes,setNotes]=useState([]);const[error,setError]=useState(null);const navigate=useNavigate();useEffect(()=>{async function fetchNotes(){try{const response=await getNotes();const allNotes=response.data;// Attach ticket status to each note\nconst notesWithStatus=await Promise.all(allNotes.map(async note=>{try{var _statusRes$data$ticke;const statusRes=await getTicketStatus(note._id);const ticketStatus=((_statusRes$data$ticke=statusRes.data.ticket[0])===null||_statusRes$data$ticke===void 0?void 0:_statusRes$data$ticke.status)||'Unavailable';return{...note,ticketStatus};}catch(err){return{...note,ticketStatus:'Unavailable'};}}));// Filter: show only Declined and For Approval\nconst filtered=notesWithStatus.filter(note=>note.ticketStatus==='Declined'||note.ticketStatus==='For Approval');setNotes(filtered);}catch(error){setError('Failed to fetch notes. Please try again later.');console.error('Failed to fetch notes:',error);}}fetchNotes();},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundImage:`url(${background})`,backgroundSize:'cover',padding:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Declined & For Approval Notes\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),notes.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No declined or pending notes available.\"}):/*#__PURE__*/_jsx(\"ul\",{children:notes.map(note=>/*#__PURE__*/_jsxs(\"li\",{onClick:()=>navigate(`/minute_note_detail/${note._id}`),style:{cursor:'pointer',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:note.title}),\" - \",/*#__PURE__*/_jsx(\"em\",{children:note.ticketStatus})]},note._id))})]});}export default MeetingNotesList;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","getNotes","getTicketStatus","background","jsx","_jsx","jsxs","_jsxs","MeetingNotesList","notes","setNotes","error","setError","navigate","fetchNotes","response","allNotes","data","notesWithStatus","Promise","all","map","note","_statusRes$data$ticke","statusRes","_id","ticketStatus","ticket","status","err","filtered","filter","console","style","backgroundImage","backgroundSize","padding","children","color","length","onClick","cursor","marginBottom","title"],"sources":["C:/Users/HP/sys_integ/frontend/src/pages/meetings/meeting_notes_list.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getNotes, getTicketStatus } from '../../services/notesService';\r\nimport background from '../../assets/background.png';\r\n\r\nfunction MeetingNotesList() {\r\n  const [notes, setNotes] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    async function fetchNotes() {\r\n      try {\r\n        const response = await getNotes();\r\n        const allNotes = response.data;\r\n\r\n        // Attach ticket status to each note\r\n        const notesWithStatus = await Promise.all(\r\n          allNotes.map(async (note) => {\r\n            try {\r\n              const statusRes = await getTicketStatus(note._id);\r\n              const ticketStatus = statusRes.data.ticket[0]?.status || 'Unavailable';\r\n              return { ...note, ticketStatus };\r\n            } catch (err) {\r\n              return { ...note, ticketStatus: 'Unavailable' };\r\n            }\r\n          })\r\n        );\r\n\r\n        // Filter: show only Declined and For Approval\r\n        const filtered = notesWithStatus.filter(\r\n          (note) =>\r\n            note.ticketStatus === 'Declined' || note.ticketStatus === 'For Approval'\r\n        );\r\n\r\n        setNotes(filtered);\r\n      } catch (error) {\r\n        setError('Failed to fetch notes. Please try again later.');\r\n        console.error('Failed to fetch notes:', error);\r\n      }\r\n    }\r\n\r\n    fetchNotes();\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ backgroundImage: `url(${background})`, backgroundSize: 'cover', padding: '20px' }}>\r\n      <h2>Declined & For Approval Notes</h2>\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n      {notes.length === 0 ? (\r\n        <p>No declined or pending notes available.</p>\r\n      ) : (\r\n        <ul>\r\n          {notes.map(note => (\r\n            <li\r\n              key={note._id}\r\n              onClick={() => navigate(`/minute_note_detail/${note._id}`)}\r\n              style={{ cursor: 'pointer', marginBottom: '10px' }}\r\n            >\r\n              <strong>{note.title}</strong> - <em>{note.ticketStatus}</em>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MeetingNotesList;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,QAAQ,CAAEC,eAAe,KAAQ,6BAA6B,CACvE,MAAO,CAAAC,UAAU,KAAM,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErD,QAAS,CAAAC,gBAAgBA,CAAA,CAAG,CAC1B,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAAc,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACd,cAAe,CAAAgB,UAAUA,CAAA,CAAG,CAC1B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAd,QAAQ,CAAC,CAAC,CACjC,KAAM,CAAAe,QAAQ,CAAGD,QAAQ,CAACE,IAAI,CAE9B;AACA,KAAM,CAAAC,eAAe,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CACvCJ,QAAQ,CAACK,GAAG,CAAC,KAAO,CAAAC,IAAI,EAAK,CAC3B,GAAI,KAAAC,qBAAA,CACF,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAtB,eAAe,CAACoB,IAAI,CAACG,GAAG,CAAC,CACjD,KAAM,CAAAC,YAAY,CAAG,EAAAH,qBAAA,CAAAC,SAAS,CAACP,IAAI,CAACU,MAAM,CAAC,CAAC,CAAC,UAAAJ,qBAAA,iBAAxBA,qBAAA,CAA0BK,MAAM,GAAI,aAAa,CACtE,MAAO,CAAE,GAAGN,IAAI,CAAEI,YAAa,CAAC,CAClC,CAAE,MAAOG,GAAG,CAAE,CACZ,MAAO,CAAE,GAAGP,IAAI,CAAEI,YAAY,CAAE,aAAc,CAAC,CACjD,CACF,CAAC,CACH,CAAC,CAED;AACA,KAAM,CAAAI,QAAQ,CAAGZ,eAAe,CAACa,MAAM,CACpCT,IAAI,EACHA,IAAI,CAACI,YAAY,GAAK,UAAU,EAAIJ,IAAI,CAACI,YAAY,GAAK,cAC9D,CAAC,CAEDhB,QAAQ,CAACoB,QAAQ,CAAC,CACpB,CAAE,MAAOnB,KAAK,CAAE,CACdC,QAAQ,CAAC,gDAAgD,CAAC,CAC1DoB,OAAO,CAACrB,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CACF,CAEAG,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEP,KAAA,QAAK0B,KAAK,CAAE,CAAEC,eAAe,CAAE,OAAO/B,UAAU,GAAG,CAAEgC,cAAc,CAAE,OAAO,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAC,QAAA,eAC9FhC,IAAA,OAAAgC,QAAA,CAAI,+BAA6B,CAAI,CAAC,CACrC1B,KAAK,eAAIN,IAAA,MAAG4B,KAAK,CAAE,CAAEK,KAAK,CAAE,KAAM,CAAE,CAAAD,QAAA,CAAE1B,KAAK,CAAI,CAAC,CAChDF,KAAK,CAAC8B,MAAM,GAAK,CAAC,cACjBlC,IAAA,MAAAgC,QAAA,CAAG,yCAAuC,CAAG,CAAC,cAE9ChC,IAAA,OAAAgC,QAAA,CACG5B,KAAK,CAACY,GAAG,CAACC,IAAI,eACbf,KAAA,OAEEiC,OAAO,CAAEA,CAAA,GAAM3B,QAAQ,CAAC,uBAAuBS,IAAI,CAACG,GAAG,EAAE,CAAE,CAC3DQ,KAAK,CAAE,CAAEQ,MAAM,CAAE,SAAS,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAL,QAAA,eAEnDhC,IAAA,WAAAgC,QAAA,CAASf,IAAI,CAACqB,KAAK,CAAS,CAAC,MAAG,cAAAtC,IAAA,OAAAgC,QAAA,CAAKf,IAAI,CAACI,YAAY,CAAK,CAAC,GAJvDJ,IAAI,CAACG,GAKR,CACL,CAAC,CACA,CACL,EACE,CAAC,CAEV,CAEA,cAAe,CAAAjB,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}