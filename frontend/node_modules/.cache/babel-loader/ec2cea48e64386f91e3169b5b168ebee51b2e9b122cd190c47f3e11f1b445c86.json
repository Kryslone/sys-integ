{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{getNotes,getTicketStatus}from'../../services/notesService';import background from'../../assets/background.png';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MeetingNotesList(){const[notes,setNotes]=useState([]);const[error,setError]=useState(null);const navigate=useNavigate();useEffect(()=>{async function fetchNotes(){try{const response=await getNotes();const allNotes=response.data;const notesWithStatus=await Promise.all(allNotes.map(async note=>{try{var _statusRes$data$ticke;const statusRes=await getTicketStatus(note._id);console.log(statusRes);const ticketStatus=((_statusRes$data$ticke=statusRes.data.ticket[0])===null||_statusRes$data$ticke===void 0?void 0:_statusRes$data$ticke.status)||'Unavailable';return{...note,ticketStatus};}catch(err){return{...note,ticketStatus:'Unavailable'};}}));const filtered=notesWithStatus.filter(note=>note.ticketStatus==='Declined'||note.ticketStatus==='For Approval');setNotes(filtered);}catch(error){setError('Failed to fetch notes. Please try again later.');console.error('Failed to fetch notes:',error);}}fetchNotes();},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundImage:`url(${background})`,backgroundSize:'cover',padding:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/meeting_screen'),style:{marginBottom:'20px',padding:'10px 20px',backgroundColor:'#4CAF50',color:'white',border:'none',borderRadius:'5px',cursor:'pointer'},children:\"\\u2190 Back to Meeting Screen\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Declined & For Approval Notes\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),notes.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No declined or pending notes available.\"}):/*#__PURE__*/_jsx(\"ul\",{children:notes.map(note=>/*#__PURE__*/_jsxs(\"li\",{onClick:()=>navigate(`/minute_note_detail/${note._id}`),style:{cursor:'pointer',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:note.title}),\" - \",/*#__PURE__*/_jsx(\"em\",{children:note.ticketStatus})]},note._id))})]});}export default MeetingNotesList;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","getNotes","getTicketStatus","background","jsx","_jsx","jsxs","_jsxs","MeetingNotesList","notes","setNotes","error","setError","navigate","fetchNotes","response","allNotes","data","notesWithStatus","Promise","all","map","note","_statusRes$data$ticke","statusRes","_id","console","log","ticketStatus","ticket","status","err","filtered","filter","style","backgroundImage","backgroundSize","padding","children","onClick","marginBottom","backgroundColor","color","border","borderRadius","cursor","length","title"],"sources":["C:/Users/HP/sys_integ/frontend/src/pages/meetings/meeting_notes_list.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getNotes, getTicketStatus } from '../../services/notesService';\r\nimport background from '../../assets/background.png';\r\n\r\nfunction MeetingNotesList() {\r\n  const [notes, setNotes] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    async function fetchNotes() {\r\n      try {\r\n        const response = await getNotes();\r\n        const allNotes = response.data;\r\n\r\n        const notesWithStatus = await Promise.all(\r\n          allNotes.map(async (note) => {\r\n            try {\r\n              const statusRes = await getTicketStatus(note._id);\r\n              console.log(statusRes);\r\n              const ticketStatus = statusRes.data.ticket[0]?.status || 'Unavailable';\r\n              return { ...note, ticketStatus };\r\n            } catch (err) {\r\n              return { ...note, ticketStatus: 'Unavailable' };\r\n            }\r\n          })\r\n        );\r\n\r\n        const filtered = notesWithStatus.filter(\r\n          (note) => note.ticketStatus === 'Declined' || note.ticketStatus === 'For Approval'\r\n        );\r\n\r\n        setNotes(filtered);\r\n      } catch (error) {\r\n        setError('Failed to fetch notes. Please try again later.');\r\n        console.error('Failed to fetch notes:', error);\r\n      }\r\n    }\r\n\r\n    fetchNotes();\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        backgroundImage: `url(${background})`,\r\n        backgroundSize: 'cover',\r\n        padding: '20px',\r\n      }}\r\n    >\r\n      <button\r\n        onClick={() => navigate('/meeting_screen')}\r\n        style={{\r\n          marginBottom: '20px',\r\n          padding: '10px 20px',\r\n          backgroundColor: '#4CAF50',\r\n          color: 'white',\r\n          border: 'none',\r\n          borderRadius: '5px',\r\n          cursor: 'pointer',\r\n        }}\r\n      >\r\n        ‚Üê Back to Meeting Screen\r\n      </button>\r\n\r\n      <h2>Declined & For Approval Notes</h2>\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n      {notes.length === 0 ? (\r\n        <p>No declined or pending notes available.</p>\r\n      ) : (\r\n        <ul>\r\n          {notes.map((note) => (\r\n            <li\r\n              key={note._id}\r\n              onClick={() => navigate(`/minute_note_detail/${note._id}`)}\r\n              style={{ cursor: 'pointer', marginBottom: '10px' }}\r\n            >\r\n              <strong>{note.title}</strong> - <em>{note.ticketStatus}</em>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MeetingNotesList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}